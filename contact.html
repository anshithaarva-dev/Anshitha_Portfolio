<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact - Sri Anshitha Arva</title>
    <link rel="stylesheet" href="styles\style.css" />
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
</head>

<body>
    <header>
        <nav>
            <ul>
                <li><a href="index.html">Sri. Arva</li>
                <div class="nav-buttons">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="index.html#about">About</a></li>
                    <li><a href="projects.html">Projects</a></li>
                    <li><a href="skills.html">Skills</a></li>
                    <li><a href="resume.pdf" download>Resume</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="reviews.html">Reviews</a></li>
                    <li><button id="mode-button" class="modeToggle"></button></li>
                </div>
            </ul>
        </nav>
    </header>

    <main>
        <section>
            <h2>Contact Me</h2>
        </section>

        <section>
            <!-- Contact form - TODO: maybe add some styling later -->
            <form name="contactForm" onsubmit="return checkFormData()" onreset="clearAllErrors()">
                <article>
                    <h4>Your Name</h4>
                    <input type="text" id="userName" name="name" placeholder="Enter your full name" required>
                    <span id="name-error" class="error-message"></span>
                </article>

                <article>
                    <h4>Your Email</h4>
                    <input type="email" id="userEmail" name="email" placeholder="Email address" required>
                    <span id="email-error" class="error-message"></span>
                </article>

                <article>
                    <h4>Message</h4>
                    <textarea id="userMessage" name="message" placeholder="Type your message here..." required></textarea>
                    <span id="message-error" class="error-message"></span>
                </article>

                <article>
                    <button type="submit" class="button">Send Message</button>
                    <button type="reset" class="button">Reset</button>
                </article>
            </form>
        </section>
    </main>

    <script>
        // Form validation - this could probably be refactored but it works fine for now
        function checkFormData() {
            // Get all the input values
            var nameInput = document.getElementById("userName").value;
            var emailInput = document.getElementById("userEmail").value;  
            var messageInput = document.getElementById("userMessage").value;

            // Get error display elements
            var nameError = document.getElementById("name-error");
            var emailError = document.getElementById("email-error");
            var messageError = document.getElementById("message-error");

            // Reset all errors first
            nameError.textContent = "";
            emailError.textContent = "";
            messageError.textContent = "";

            var formIsValid = true;

            // Check name - I think this regex is fine, covers most cases
            if (nameInput === "" || nameInput.trim() === "") {
                nameError.textContent = "Please enter your name using only letters and spaces.";
                formIsValid = false;
            } else if (!/^[A-Za-z\s]+$/.test(nameInput)) {
                nameError.textContent = "Please enter your name using only letters and spaces.";
                formIsValid = false;
            }

            // Email validation - basic check should be enough
            if (emailInput === "") {
                emailError.textContent = "Please enter a valid email address.";
                formIsValid = false;
            } else if (!emailInput.includes("@") || !emailInput.includes(".")) {
                emailError.textContent = "Please enter a valid email address.";
                formIsValid = false;
            }

            // Message validation
            if (messageInput === "") {
                messageError.textContent = "Please enter a message with at least 10 characters.";
                formIsValid = false;
            } else if (messageInput.length < 10) {
                messageError.textContent = "Please enter a message with at least 10 characters.";
                formIsValid = false;
            } else {
                // Check word count - split by spaces and filter empty strings
                var wordCount = messageInput.split(/\s+/).filter(function(word) {
                    return word.length > 0;
                }).length;
                
                if (wordCount > 120) {
                    messageError.textContent = "Message cannot exceed 120 words.";
                    formIsValid = false;
                }
            }

            // If everything looks good, show success message
            if (formIsValid) {
                alert("Form submitted successfully! Thank you for your message.");
                return true;
            } else {
                return false;  // Prevent form submission
            }
        }

        // Reset function - clears all error messages
        function clearAllErrors() {
            document.getElementById("name-error").textContent = "";
            document.getElementById("email-error").textContent = "";
            document.getElementById("message-error").textContent = "";
        }
    </script>
    <script src="scripts/dark-mode.js"></script>
    <script src="scripts/sticky-nav.js"></script>
</body>

</html>